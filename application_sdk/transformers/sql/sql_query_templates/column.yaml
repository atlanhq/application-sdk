# column.yaml
table: Column
columns:
  - name: attributes.name
    source_query: column_name
  - name: attributes.qualifiedName
    source_query: concat(connection_qualified_name, '/', table_catalog, '/', table_schema, '/', table_name, '/', column_name)
    source_columns: [connection_qualified_name, table_catalog, table_schema, table_name, column_name]
  - name: attributes.connectionQualifiedName
    source_query: connection_qualified_name
  - name: attributes.connectionName
    source_query: connection_name
  - name: attributes.description
    source_query: remarks
  - name: attributes.databaseName
    source_query: table_catalog
  - name: attributes.databaseQualifiedName
    source_query: concat(connection_qualified_name, '/', table_catalog)
    source_columns: [connection_qualified_name, table_catalog]
  - name: attributes.schemaName
    source_query: table_schema
  - name: attributes.schemaQualifiedName
    source_query: concat(connection_qualified_name, '/', table_catalog, '/', table_schema)
    source_columns: [connection_qualified_name, table_catalog, table_schema]
  - name: attributes.tableName
    source_query: table_name
  - name: attributes.tableQualifiedName
    source_query: concat(connection_qualified_name, '/', table_catalog, '/', table_schema, '/', table_name)
    source_columns: [connection_qualified_name, table_catalog, table_schema, table_name]
  - name: attributes.dataType
    source_query: data_type
  - name: attributes.isNullable
    source_query: |
      CASE
        WHEN COALESCE(is_nullable, 'YES') = 'YES' THEN TRUE
        ELSE FALSE
      END
    source_columns: [is_nullable]
  - name: attributes.isPartition
    source_query: |
      CASE
        WHEN COALESCE(is_partition, NULL) = 'YES' THEN TRUE
        ELSE FALSE
      END
    source_columns: [is_partition]
  - name: attributes.partitionOrder
    source_query: COALESCE(partition_order, 0)
    source_columns: [partition_order]
  - name: attributes.isPrimary
    source_query: |
      CASE
        WHEN COALESCE(constraint_type, '') = 'PRIMARY KEY' THEN TRUE
        ELSE FALSE
      END
    source_columns: [constraint_type]
  - name: attributes.isForeign
    source_query: |
      CASE
        WHEN COALESCE(constraint_type, '') = 'FOREIGN KEY' THEN TRUE
        ELSE FALSE
      END
    source_columns: [constraint_type]
  - name: attributes.precision
    source_query: decimal_digits
  - name: attributes.viewName
    source_query: |
      CASE
        WHEN table_type = 'VIEW' OR table_type = 'MATERIALIZED VIEW' THEN table_name
        ELSE NULL
      END
    source_columns: [table_type]
  - name: attributes.viewQualifiedName
    source_query: |
      CASE
        WHEN table_type = 'VIEW' OR table_type = 'MATERIALIZED VIEW' THEN concat(connection_qualified_name, '/', table_catalog, '/', table_schema, '/', table_name)
        ELSE NULL
      END
    source_columns: [table_type]
  - name: attributes.order
    source_query: ordinal_position
  - name: custom_attributes.ordinal_position
    source_query: ordinal_position
  - name: custom_attributes.is_self_referencing
    source_query: COALESCE(is_self_referencing, 'NO')
    source_columns: [is_self_referencing]
  - name: custom_attributes.type_name
    source_query: COALESCE(type_name, data_type)
  - name: custom_attributes.numeric_precision
    source_query: numeric_precision
  - name: custom_attributes.character_octet_length
    source_query: character_octet_length
  - name: custom_attributes.is_auto_increment
    source_query: is_auto_increment
  - name: custom_attributes.is_generated
    source_query: is_generated
  - name: custom_attributes.num_prec_radix
    source_query: num_prec_radix
  - name: custom_attributes.extra_info
    source_query: extra_info
  - name: custom_attributes.buffer_length
    source_query: buffer_length
  - name: custom_attributes.column_size
    source_query: column_size
  - name: custom_attributes.is_identity
    source_query: is_identity
  - name: custom_attributes.identity_cycle
    source_query: identity_cycle
  - name: attributes.tenantId
    source_query: tenant_id
  - name: attributes.lastSyncWorkflowName
    source_query: last_sync_workflow_name
  - name: attributes.lastSyncRun
    source_query: last_sync_run
  - name: attributes.lastSyncRunAt
    source_query: last_sync_run_at
  - name: attributes.connectorName
    source_query: connector_name
  - name: typeName
    source_query: "'Column'"
  - name: status
    source_query: "'ACTIVE'"